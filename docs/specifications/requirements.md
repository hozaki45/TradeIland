# TradeIland 要件仕様書

## プロジェクト概要

### 目的
複数トレーダーの日次損益データを効率的に分析し、パフォーマンス評価・比較を行うシステムの構築

### 対象ユーザー
- トレーディングマネージャー
- リスク管理担当者
- パフォーマンス分析担当者

## 機能要件

### 1. データ処理機能

#### 1.1 データ読み込み
- **入力**: TradeIland.xlsx（複数シート形式）
- **処理**: Excelシリアル値から日付への変換
- **出力**: 正規化された日次カレンダーデータ

#### 1.2 データ変換
- 月次シート構造から日次カレンダー形式への変換
- 複数トレーダーデータの統合
- 欠損値・異常値の処理

#### 1.3 データ出力
- Excel形式（日次カレンダー）
- CSV形式（分析用）
- JSON形式（Web API用）

### 2. 分析機能

#### 2.1 基本統計
- **収益指標**: 合計収益、平均日次収益、中央値
- **リスク指標**: 標準偏差、最大ドローダウン
- **パフォーマンス指標**: 勝率、プロフィットファクター
- **期間分析**: 日次、月次、四半期、年次

#### 2.2 比較分析
- トレーダー間パフォーマンス比較
- 期間別パフォーマンス比較
- ベンチマーク比較
- 相関分析

#### 2.3 リスク分析
- VaR（Value at Risk）計算
- シャープレシオ
- 最大連続損失日数
- リスク調整後リターン

### 3. 可視化機能

#### 3.1 基本チャート
- 日次収益推移グラフ
- 累積収益グラフ
- 収益分布ヒストグラム
- ドローダウンチャート

#### 3.2 比較チャート
- トレーダー別パフォーマンス比較
- 相関行列ヒートマップ
- リスクリターン散布図
- 月次収益カレンダー

#### 3.3 レポート
- HTMLダッシュボード
- PDFレポート出力
- 週次・月次サマリー

## 非機能要件

### 1. パフォーマンス
- データ処理時間: 1万件のデータを10秒以内
- メモリ使用量: 1GB以下
- レスポンス時間: 基本分析は5秒以内

### 2. 拡張性
- 新しいトレーダーの追加が容易
- 新しい分析指標の追加が可能
- データ形式の変更に対応可能

### 3. 保守性
- モジュール化された設計
- 十分なテストカバレッジ
- ドキュメントの充実

### 4. セキュリティ
- データの暗号化（機密性要求がある場合）
- アクセス制御
- 監査ログ

## 技術要件

### 1. 開発環境
- **言語**: Python 3.10+
- **パッケージ管理**: uv
- **開発ツール**: VS Code, Jupyter Notebook

### 2. 依存ライブラリ
- **データ処理**: pandas, numpy
- **可視化**: matplotlib, seaborn, plotly
- **Excel処理**: openpyxl
- **統計**: scipy, scikit-learn
- **Web**: Flask/FastAPI（将来的）

### 3. 出力形式
- Excel (.xlsx)
- CSV (.csv)
- JSON (.json)
- HTML レポート
- PDF レポート

## データ仕様

### 1. 入力データ
```
TradeIland.xlsx
├── Trader_A シート
│   ├── 列: Excel日付シリアル値（月単位）
│   └── 行: 日次収益データ、メタデータ
├── Trader_B シート
└── ...
```

### 2. 出力データ
```
Daily_Calendar.xlsx
├── A列: 日付（YYYY-MM-DD）
├── B列: Trader_A 日次収益
├── C列: Trader_B 日次収益
└── ...
```

## プロジェクト構成

```
TradeIland/
├── tradeiland-analysis/     # メイン分析パッケージ
│   ├── src/                 # ソースコード
│   ├── tests/              # テストコード
│   └── pyproject.toml      # 設定ファイル
├── data/                   # データファイル
├── docs/                   # ドキュメント
├── output/                 # 出力結果
└── configs/               # 設定ファイル
```

---

*作成日: 2025-08-17*
*バージョン: 1.0*